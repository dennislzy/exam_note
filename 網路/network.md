# 網路概論完整學習筆記

## 目錄
- [網路拓樸結構](#網路拓樸結構)
- [網路連結裝置](#網路連結裝置)
- [OSI 參考模型](#osi-參考模型)
- [訊號傳輸技術](#訊號傳輸技術)
- [乙太網路與存取技術](#乙太網路與存取技術)
- [無線網路技術](#無線網路技術)
- [網路交換技術](#網路交換技術)
- [IP 協定與位址管理](#ip-協定與位址管理)
- [傳輸層協定](#傳輸層協定)
- [應用層協定與服務](#應用層協定與服務)
- [雲端運算](#雲端運算)
- [新興網路技術](#新興網路技術)

---

## 網路拓樸結構
[⬆️ 回到目錄](#目錄)

### 實體拓樸類型

**匯流排 (Bus)**
- **結構**：所有節點連接到單一傳輸媒介
- **優點**：成本低、建置簡單
- **缺點**：某段線路故障會影響整個網路
- **應用**：早期區域網路

**星狀 (Star)**
- **結構**：所有設備連接到中央集線器（Switch 或 Hub）
- **優點**：故障只影響單一節點、易於管理
- **缺點**：中心節點故障則整個網路癱瘓
- **應用**：現代區域網路主流

**環狀 (Ring)**
- **結構**：設備連成環形，使用 Token 控制存取
- **優點**：不會有碰撞問題、傳輸公平
- **缺點**：單點故障會導致整個網路癱瘓
- **應用**：Token Ring、FDDI

**網狀 (Mesh)**
- **結構**：每台設備至少與其他兩台設備相連
- **優點**：容錯能力強、多重路徑
- **缺點**：佈線成本高、管理複雜
- **應用**：骨幹網路、重要系統

### 邏輯拓樸類型

**主從式網路 (Client-Server)**
- **結構**：一台伺服器提供服務，多台客戶端請求服務
- **優點**：
  - 集中管理資源
  - 安全性較高
  - 效能穩定
- **缺點**：
  - 軟硬體成本高
  - 伺服器成為瓶頸
- **應用**：企業網路、資料庫系統

**對等式網路 (Peer-to-Peer, P2P)**
- **結構**：每台設備地位相等，可互相提供服務
- **優點**：
  - 成本較低
  - 分散式架構
  - 無單點故障
- **缺點**：
  - 管理困難
  - 安全性較低
  - 效能不穩定
- **應用**：檔案分享、BitTorrent

---

## 網路連結裝置
[⬆️ 回到目錄](#目錄)

### 實體層設備

**數據機 (Modem)**
- **功能**：數位/類比訊號轉換
- **類型**：
  - ADSL Modem：透過電話線上網
  - Cable Modem：透過有線電視網路
  - 4G/5G Modem：行動網路連接
- **應用**：家庭上網、遠端連線

**中繼器 (Repeater)**
- **功能**：放大並重新傳送訊號
- **目的**：延長傳輸距離
- **限制**：只能放大訊號，無法過濾錯誤

**集線器 (Hub)**
- **功能**：多埠中繼器，共享頻寬
- **特性**：
  - 半雙工傳輸
  - 碰撞域擴大
  - 已被交換器取代

### 資料連結層設備

**交換器 (Switch)**
- **功能**：根據 MAC 地址轉送資料框
- **特性**：
  - 全雙工傳輸
  - 每個埠獨立的碰撞域
  - 學習和記錄 MAC 地址表
- **優點**：
  - 提高網路效能
  - 減少碰撞
  - 支援 VLAN
- **應用**：區域網路建置

**橋接器 (Bridge)**
- **功能**：連接兩個網段，過濾流量
- **特性**：
  - 學習 MAC 地址
  - 分割碰撞域
  - 透明橋接

### 網路層設備

**路由器 (Router)**
- **功能**：根據 IP 地址決定封包轉送路徑
- **特性**：
  - 連接不同網路
  - 路徑選擇
  - 分割廣播域
- **功能細節**：
  - 維護路由表
  - 執行路由協定
  - NAT 轉換
  - 防火牆功能
- **應用**：連接 LAN 與 WAN

**三層交換器 (Layer 3 Switch)**
- **功能**：結合交換器和路由器功能
- **優點**：高速路由、硬體加速

### 應用層設備

**閘道器 (Gateway)**
- **功能**：連接不同通訊協定的網路
- **應用**：
  - IPv4 到 IPv6 轉換
  - 協定轉換
  - 應用層代理

---

## OSI 參考模型
[⬆️ 回到目錄](#目錄)

### 七層模型詳解

**實體層 (Physical Layer - Layer 1)**
- **功能**：處理電子訊號的傳輸
- **包含要素**：
  - 連線方式
  - 傳輸媒介
  - 訊號轉換
  - 電壓準位
- **設備**：數據機、集線器、中繼器
- **例子**：電纜、光纖、無線電波

**資料連結層 (Data Link Layer - Layer 2)**
- **功能**：可靠的點對點資料傳輸
- **主要工作**：
  - 訊框格式化
  - 錯誤偵測與修正
  - 流量控制
  - MAC 地址處理
- **協定**：Ethernet、Wi-Fi、PPP
- **設備**：交換器、橋接器、網路卡

**網路層 (Network Layer - Layer 3)**
- **功能**：路徑選擇和邏輯地址
- **主要工作**：
  - IP 地址解析
  - 路由選擇
  - 封包轉送
  - 流量控制
- **協定**：IP、ICMP、ARP、OSPF、BGP
- **設備**：路由器、三層交換器

**傳輸層 (Transport Layer - Layer 4)**
- **功能**：端對端可靠傳輸
- **主要工作**：
  - 分段與重組
  - 錯誤恢復
  - 流量控制
  - 多工與解多工
- **協定**：TCP、UDP、SCTP
- **概念**：埠號、連線管理

**會議層 (Session Layer - Layer 5)**
- **功能**：建立、管理、終止會議
- **主要工作**：
  - 會議建立
  - 同步控制
  - 檢查點設置
  - 會議終止
- **協定**：NetBIOS、SQL sessions
- **例子**：登入驗證、會議管理

**表達層 (Presentation Layer - Layer 6)**
- **功能**：資料格式轉換
- **主要工作**：
  - 資料壓縮
  - 加密/解密
  - 格式轉換
  - 字元編碼
- **協定**：SSL/TLS、JPEG、MPEG
- **例子**：檔案格式轉換、加密

**應用層 (Application Layer - Layer 7)**
- **功能**：應用程式網路服務介面
- **主要工作**：
  - 網路服務存取
  - 使用者介面
  - 應用程式支援
- **協定**：HTTP、FTP、SMTP、DNS
- **例子**：網頁瀏覽器、電子郵件

### 資料封裝過程

**向下封裝 (Encapsulation)**
```
應用層    資料 (Data)
表達層    資料 (Data)
會議層    資料 (Data)
傳輸層    [TCP/UDP Header] + 資料 = 區段 (Segment)
網路層    [IP Header] + 區段 = 封包 (Packet)
資料鏈結層 [Frame Header] + 封包 + [Trailer] = 訊框 (Frame)
實體層    位元流 (Bit Stream)
```

**向上解封裝 (Decapsulation)**
接收端收到資料後，逐層移除表頭，還原原始資料。

---

## 訊號傳輸技術
[⬆️ 回到目錄](#目錄)

### 傳輸方式分類

**並列傳輸 (Parallel Transmission)**
- **特性**：同時傳送多個位元
- **優點**：傳輸速度快
- **缺點**：
  - 線路多，成本高
  - 容易產生串音干擾
  - 適用距離短
- **應用**：電腦內部匯流排、印表機介面

**序列傳輸 (Serial Transmission)**
- **特性**：逐一位元傳送
- **優點**：
  - 成本低
  - 適用長距離
  - 干擾少
- **缺點**：傳輸速度相對慢
- **應用**：網路通訊、USB、SATA

### 同步方式分類

**同步傳輸 (Synchronous)**
- **特性**：
  - 發送端和接收端共享時鐘
  - 可連續傳送大量資料
  - 效率高
- **優點**：高速傳輸、效率佳
- **缺點**：需要複雜的時鐘同步機制
- **應用**：高速網路、光纖通訊

**非同步傳輸 (Asynchronous)**
- **特性**：
  - 每個字元有起始位元和停止位元
  - 不需要共享時鐘
  - 傳輸間隔不定
- **優點**：實作簡單、成本低
- **缺點**：效率較低、速度受限
- **應用**：序列埠、數據機通訊

### 調變技術 (Modulation)

**振幅調變 (AM - Amplitude Modulation)**
- **原理**：改變載波的振幅
- **編碼**：振幅強代表 1，振幅弱代表 0
- **特性**：實作簡單，但抗雜訊能力差

**頻率調變 (FM - Frequency Modulation)**
- **原理**：改變載波的頻率
- **編碼**：高頻率代表 1，低頻率代表 0
- **特性**：抗雜訊能力較好

**相位調變 (PM - Phase Modulation)**
- **原理**：改變載波的相位
- **編碼**：相位改變代表 1，相位不變代表 0
- **特性**：效率高，常用於數位通訊

**正交調變 (QAM - Quadrature Amplitude Modulation)**
- **原理**：同時調變振幅和相位
- **優點**：頻譜效率高，可傳輸更多位元
- **應用**：高速數據機、Wi-Fi、有線電視

### 多工技術 (Multiplexing)

**時分多工 (TDMA - Time Division Multiple Access)**
- **原理**：將時間切割成時槽，每個用戶使用不同時槽
- **特性**：共享全部頻寬
- **應用**：2G 行動通訊

**頻分多工 (FDMA - Frequency Division Multiple Access)**
- **原理**：將頻寬切割，每個用戶使用不同頻率
- **特性**：任何時間都可使用
- **應用**：類比電話、廣播

**分碼多工 (CDMA - Code Division Multiple Access)**
- **原理**：同頻同時傳輸，使用不同編碼區分
- **特性**：抗干擾能力強
- **應用**：3G 行動通訊

**正交分頻多工 (OFDM - Orthogonal Frequency Division Multiplexing)**
- **原理**：將資料分散到多個正交子載波
- **特性**：抗多重路徑干擾
- **應用**：4G LTE、Wi-Fi、數位電視

**統計多工 (Statistical Multiplexing)**
- **原理**：動態分配頻寬給有需求的用戶
- **特性**：提高頻寬使用效率
- **應用**：網際網路、封包交換網路

---

## 乙太網路與存取技術
[⬆️ 回到目錄](#目錄)

### 乙太網路 (Ethernet)

**基本特性**
- **標準**：IEEE 802.3
- **存取方法**：CSMA/CD
- **傳輸方式**：廣播式傳輸
- **優點**：
  - 傳送速度快
  - 設備成本低
  - 技術成熟
  - 廣泛支援

**乙太網路標準演進**
- **10Base-T**：10 Mbps，雙絞線
- **100Base-TX**：100 Mbps，快速乙太網路
- **1000Base-T**：1 Gbps，超高速乙太網路
- **10GBase-T**：10 Gbps，萬兆乙太網路

### CSMA/CD 技術

**工作原理**
1. **載波感測 (Carrier Sense)**：檢測媒介是否空閒
2. **多重存取 (Multiple Access)**：多個設備共享媒介
3. **碰撞偵測 (Collision Detection)**：偵測傳輸碰撞

**碰撞處理流程**
1. 設備準備傳送資料
2. 檢測媒介是否空閒
3. 如果空閒則開始傳送
4. 邊傳送邊偵測碰撞
5. 如果發生碰撞：
   - 發送堵塞訊號 (Jam Signal)
   - 停止傳送
   - 等待隨機時間 (指數退避)
   - 重新嘗試傳送

**指數退避演算法**
- 第一次碰撞：等待 0-1 個時槽
- 第二次碰撞：等待 0-3 個時槽
- 第 n 次碰撞：等待 0-(2^n-1) 個時槽
- 最多重試 16 次

### CSMA/CA 技術

**應用場景**：無線網路（無法同時收發）

**工作流程**
1. **載波感測**：檢測媒介是否空閒
2. **避免碰撞**：使用 RTS/CTS 機制
3. **RTS (Request to Send)**：請求傳送
4. **CTS (Clear to Send)**：准許傳送
5. **NAV (Network Allocation Vector)**：其他設備設定等待時間
6. **資料傳送**：開始實際傳送資料
7. **ACK 確認**：接收端確認收到

### VLAN 技術

**虛擬區域網路 (Virtual LAN)**
- **概念**：在同一實體網路中建立邏輯分割
- **實作方式**：
  - 埠式 VLAN
  - MAC 地址式 VLAN
  - 協定式 VLAN
  - 子網路式 VLAN

**優點**
- **降低成本**：減少路由器使用
- **提高效能**：減少廣播域
- **增強安全**：隔離不同群組流量
- **管理彈性**：軟體設定，易於調整

**VLAN 標籤 (802.1Q)**
- 在乙太網路標頭插入 4 位元組 VLAN 標籤
- 包含 VLAN ID (12 位元)，支援 4096 個 VLAN

---

## 無線網路技術
[⬆️ 回到目錄](#目錄)

### 無線頻譜基礎

**頻帶特性**
- **頻率越高**：
  - 傳播速度越快
  - 穿透能力越強
  - 傳輸距離越短
- **頻率越低**：
  - 傳播速度越慢
  - 穿透力較差
  - 傳輸距離越長

**展頻技術**
- **目的**：提高通訊穩定性和保密性
- **原理**：將窄頻高功率訊號轉為寬頻低功率訊號

**跳頻展頻 (FHSS - Frequency Hopping Spread Spectrum)**
- **原理**：在多個子頻率間快速跳躍
- **優點**：
  - 抗干擾能力強
  - 保密性高
  - 多用戶可同時使用
- **應用**：藍牙、早期 Wi-Fi

**直接序列展頻 (DSSS - Direct Sequence Spread Spectrum)**
- **原理**：用展頻碼將資料展開到更寬的頻帶
- **優點**：
  - 降低訊號功率密度
  - 有效控制雜訊干擾
  - 展頻碼越多，抗干擾越強
- **應用**：GPS、Wi-Fi 802.11b

### 行動通訊演進

**第一代 (1G) - AMPS**
- **技術**：類比訊號傳輸
- **特性**：僅支援語音通話
- **缺點**：安全性差、容量有限

**第二代 (2G) - GSM**
- **技術**：數位訊號、TDMA
- **特性**：
  - 蜂巢式架構
  - 支援 SMS
  - 數位加密
- **優點**：通話品質好、安全性高

**第三代 (3G) - UMTS/CDMA2000**
- **技術**：CDMA、寬頻傳輸
- **特性**：
  - 高速資料傳輸
  - 支援視訊通話
  - 網際網路存取
- **應用**：行動上網、多媒體服務

**第四代 (4G) - LTE**
- **技術**：OFDM、MIMO
- **特性**：
  - 全 IP 網路
  - 高速寬頻
  - 低延遲
- **應用**：高畫質視訊、雲端服務

**第五代 (5G)**
- **技術**：毫米波、大規模 MIMO
- **特性**：
  - 超高速傳輸
  - 超低延遲
  - 大量連接
- **應用**：物聯網、自動駕駛、AR/VR

### 無線網路標準

**Wi-Fi (IEEE 802.11)**
- **頻段**：2.4 GHz、5 GHz、6 GHz
- **存取技術**：CSMA/CA
- **標準演進**：
  - 802.11a/b/g：54 Mbps
  - 802.11n：300 Mbps (MIMO)
  - 802.11ac：6.77 Gbps (MU-MIMO)
  - 802.11ax (Wi-Fi 6)：9.6 Gbps

**WiMAX (IEEE 802.16)**
- **用途**：大範圍都會網路
- **特性**：
  - 傳播範圍廣
  - 傳輸速度快
  - 移動性支援
- **應用**：寬頻無線存取、回程連接

**藍牙 (Bluetooth)**
- **技術**：FHSS 跳頻展頻
- **特性**：
  - 短距離通訊 (10-100 公尺)
  - 低功耗
  - 點對點、點對多點連接
- **版本演進**：
  - 藍牙 1.x/2.x：基本資料傳輸
  - 藍牙 3.0：高速版本
  - 藍牙 4.0：低功耗 (BLE)
  - 藍牙 5.0：更長距離、更快速度

**RFID (Radio Frequency Identification)**
- **組成**：RFID 標籤 + RFID 讀取器
- **工作原理**：
  1. 讀取器發送射頻訊號
  2. 標籤進入感應範圍產生電流
  3. 標籤回傳儲存的資訊
  4. 讀取器接收並處理資料
- **應用**：庫存管理、門禁系統、電子票證

---

## 網路交換技術
[⬆️ 回到目錄](#目錄)

### 電路交換 (Circuit Switching)

**工作原理**
- 通訊前建立專用實體線路
- 整個通訊期間線路專屬使用
- 通訊結束後釋放線路

**特性**
- **優點**：
  - 延遲低且固定
  - 傳輸品質穩定
  - 頻寬保證
- **缺點**：
  - 連線建立時間長
  - 頻寬利用率低
  - 成本高
- **應用**：傳統電話網路 (PSTN)

### 分封交換 (Packet Switching)

**工作原理**
- 資料切割成小封包
- 每個封包獨立選擇路徑
- 使用「儲存後轉送」機制
- 接收端重組原始資料

**特性**
- **優點**：
  - 節省傳送時間
  - 提高線路使用率
  - 成本較低
  - 容錯能力強
- **缺點**：
  - 封包可能失序
  - 延遲變動較大
  - 需要重組機制
- **應用**：網際網路、區域網路

### 訊息交換 (Message Switching)

**工作原理**
- 完整訊息儲存後轉送
- 中繼節點暫存整個訊息
- 找到適當路徑後轉送

**特性**
- **優點**：不需要建立連線
- **缺點**：延遲較大、需要大量儲存空間
- **應用**：早期電報系統、電子郵件

### 特殊交換技術

**T-Carrier 系統**
- **定義**：數位傳輸系統標準
- **T1 規格**：
  - 24 個聲音通道
  - 每通道 64 Kbps
  - 總頻寬 1.544 Mbps
- **階層**：T1、T3、T4
- **應用**：電話網路骨幹

**ATM (Asynchronous Transfer Mode)**
- **特性**：
  - 固定長度封包 (53 位元組)
  - 表頭 5 位元組 + 資料 48 位元組
  - 以交換器為基礎
- **優點**：
  - 用戶獨享頻寬
  - 支援 QoS
  - 適合多媒體傳輸
- **應用**：高速骨幹網路、企業網路

---

## IP 協定與位址管理
[⬆️ 回到目錄](#目錄)

### IPv4 位址結構

**基本格式**：網路識別碼 (Net ID) + 主機識別碼 (Host ID)

**位址分類**

**A 類位址 (國家級)**
- **範圍**：0.0.0.0 - 127.255.255.255
- **結構**：8 位元網路 + 24 位元主機
- **預設遮罩**：255.0.0.0 (/8)
- **用途**：大型組織、國家級網路

**B 類位址 (ISP 級)**
- **範圍**：128.0.0.0 - 191.255.255.255
- **結構**：16 位元網路 + 16 位元主機
- **預設遮罩**：255.255.0.0 (/16)
- **用途**：中型組織、ISP

**C 類位址 (一般企業)**
- **範圍**：192.0.0.0 - 223.255.255.255
- **結構**：24 位元網路 + 8 位元主機
- **預設遮罩**：255.255.255.0 (/24)
- **用途**：小型組織、一般企業

**D 類位址 (多播)**
- **範圍**：224.0.0.0 - 239.255.255.255
- **用途**：多點廣播 (Multicast)

**E 類位址 (保留)**
- **範圍**：240.0.0.0 - 255.255.255.255
- **用途**：實驗與未來使用

### 特殊位址

**回路位址 (Loopback)**
- **位址**：127.0.0.1
- **用途**：本機測試

**私有位址 (Private Address)**
- **A 類**：10.0.0.0/8
- **B 類**：172.16.0.0/12
- **C 類**：192.168.0.0/16
- **用途**：內部網路，不可在網際網路路由

**特殊位址組合**
- **網路位址**：Host ID 全為 0
- **廣播位址**：Host ID 全為 1
- **有限廣播**：255.255.255.255
- **未知位址**：0.0.0.0

### 子網路切割 (Subnetting)

**目的**
- 有效利用 IP 位址
- 改善網路效能
- 增強安全性
- 簡化管理

**子網路遮罩 (Subnet Mask)**
- **格式**：連續的 1 + 連續的 0
- **功能**：區分網路部分和主機部分
- **運算**：IP 位址 AND 子網路遮罩 = 網路位址

**CIDR (Classless Inter-Domain Routing)**
- **概念**：無等級位址分配
- **表示法**：IP/前綴長度 (如 192.168.1.0/24)
- **優點**：
  - 減少路由表大小
  - 提高位址利用率
  - 支援彈性分配

### IPv4 封包結構

**重要欄位**
- **版本 (4 位元)**：IP 版本號碼
- **IHL (4 位元)**：表頭長度 (×4 位元組)
- **TOS (8 位元)**：服務類型
- **總長度 (16 位元)**：整個封包長度
- **識別 (16 位元)**：分段識別
- **旗標 (3 位元)**：分段控制
- **分段位移 (13 位元)**：分段偏移量
- **TTL (8 位元)**：存活時間
- **協定 (8 位元)**：上層協定
- **表頭檢查碼 (16 位元)**：錯誤檢查
- **來源位址 (32 位元)**：發送端 IP
- **目的位址 (32 位元)**：接收端 IP

### NAT 技術

**網路位址轉換 (Network Address Translation)**
- **目的**：解決 IPv4 位址不足
- **原理**：將私有 IP 轉換為公有 IP

**NAT 類型**
- **靜態 NAT**：一對一固定對應
- **動態 NAT**：多對多動態對應
- **PAT (埠位址轉換)**：多對一，使用埠號區分

**優點**
- 節省公有 IP 位址
- 增強內部網路安全
- 簡化內部 IP 管理

**缺點**
- 增加延遲
- 影響某些應用程式
- 端對端通訊困難

### IPv6 協定

**位址特性**
- **長度**：128 位元 (2^128 個位址)
- **表示法**：8 組 16 進位數字，用冒號分隔
- **簡化規則**：
  - 前導零可省略
  - 連續零段可用 :: 表示 (只能用一次)

**位址類型**
- **單播 (Unicast)**：點對點通訊
- **多播 (Multicast)**：點對多點通訊
- **任播 (Anycast)**：點對最近點通訊

**特殊位址**
- **回路位址**：::1
- **未指定位址**：::
- **IPv4 對應**：::ffff:<IPv4位址>

**IPv6 優點**
- **龐大位址空間**：解決位址不足
- **提升路由效率**：固定表頭、減少欄位
- **自動設定**：SLAAC 機制
- **內建安全**：IPSec 支援
- **更好的 QoS**：流量標籤
- **無廣播機制**：改用多播

### IPv4 到 IPv6 轉移

**雙協定堆疊 (Dual Stack)**
- **方法**：同時支援 IPv4 和 IPv6
- **優點**：相容性最好
- **缺點**：資源需求大

**隧道技術 (Tunneling)**
- **6to4**：在 IPv4 網路建立 IPv6 隧道
- **6in4**：IPv6 封包封裝在 IPv4 內
- **優點**：逐步轉移
- **缺點**：增加複雜度

**轉換技術 (Translation)**
- **NAT64**：IPv6 和 IPv4 位址轉換
- **DNS64**：DNS 查詢轉換
- **優點**：解決互通問題
- **缺點**：可能遺失資訊

---

## 傳輸層協定
[⬆️ 回到目錄](#目錄)

### UDP 協定 (User Datagram Protocol)

**基本特性**
- **連線型態**：無連線 (Connectionless)
- **可靠性**：不可靠傳輸
- **特點**：
  - 不保證資料正確性
  - 不確認連線狀態
  - 不保證傳送順序
  - 開銷小、速度快

**UDP 表頭結構**
```
來源埠號 (16 位元) | 目的埠號 (16 位元)
長度 (16 位元)     | 檢查碼 (16 位元)
```

**應用場合**
- **廣播和多播**：一對多傳輸
- **即時應用**：線上遊戲、視訊串流
- **簡單查詢**：DNS 查詢
- **效能要求高**：對速度敏感的應用

### TCP 協定 (Transmission Control Protocol)

**基本特性**
- **連線型態**：面向連線
- **可靠性**：可靠傳輸
- **功能**：
  - 資料有序抵達
  - 錯誤檢查和重傳
  - 流量控制
  - 擁塞控制

**TCP 表頭結構**
```
來源埠號 (16)          | 目的埠號 (16)
序號 (32)
確認號碼 (32)
表頭長度(4)|保留(6)|旗標(6)| 視窗大小 (16)
檢查碼 (16)           | 緊急指標 (16)
選項 (可變長度)        | 填充
```

**重要旗標位元**
- **SYN**：同步，建立連線
- **ACK**：確認回應
- **FIN**：結束，終止連線
- **RST**：重設連線
- **PSH**：立即推送資料
- **URG**：緊急資料

### TCP 連線管理

**三向交握 (Three-Way Handshake)**
```
Client                    Server
  |                         |
  |-------SYN(seq=x)------->|  1. 客戶端請求連線
  |                         |
  |<--SYN+ACK(seq=y,ack=x+1)|  2. 伺服器確認並回應
  |                         |
  |-----ACK(ack=y+1)------->|  3. 客戶端確認連線
  |                         |
  |    連線建立完成          |
```

**四向交握 (Four-Way Handshake)**
```
Client                    Server
  |                         |
  |-------FIN(seq=x)------->|  1. 客戶端要求關閉
  |                         |
  |<-----ACK(ack=x+1)-------|  2. 伺服器確認
  |                         |
  |<-----FIN(seq=y)---------|  3. 伺服器要求關閉
  |                         |
  |-----ACK(ack=y+1)------->|  4. 客戶端確認
  |                         |
  |    連線完全關閉          |
```

### TCP 可靠性機制

**重傳機制**

**逾時重傳 (Timeout Retransmission)**
- **原理**：設定 RTO (Retransmission Timeout)
- **觸發**：超時未收到 ACK
- **動作**：重新傳送遺失封包

**快速重傳 (Fast Retransmit)**
- **原理**：連續收到 3 個相同 ACK
- **判斷**：中間封包可能遺失
- **動作**：立即重傳，不等逾時

**選擇性確認 (SACK)**
- **問題**：傳統 ACK 只能確認連續收到的資料
- **解決**：精確告知收到哪些片段
- **優點**：減少不必要的重傳

**往返時間 (RTT) 計算**
- **用途**：動態調整 RTO 值
- **測量**：從傳送到收到 ACK 的時間
- **演算法**：指數加權移動平均

### TCP 流量控制

**滑動視窗 (Sliding Window)**
- **目的**：控制傳送速率，防止接收端溢位
- **機制**：
  - 傳送視窗：允許未確認的資料量
  - 接收視窗：接收端可接受的資料量
  - 視窗大小動態調整

**視窗操作**
```
已確認 | 已傳送未確認 | 可傳送 | 未來資料
      ^            ^         ^
    左邊界        指標      右邊界
```

**零視窗問題**
- **狀況**：接收端視窗大小為 0
- **處理**：傳送端停止傳送，定期探測

### TCP 擁塞控制

**慢啟動 (Slow Start)**
- **目的**：探測網路容量
- **機制**：視窗大小指數增長
- **停止條件**：達到慢啟動門檻值

**擁塞避免 (Congestion Avoidance)**
- **觸發**：超過慢啟動門檻值
- **機制**：視窗大小線性增長
- **目的**：穩定狀態下的調整

**快速恢復 (Fast Recovery)**
- **觸發**：收到重複 ACK
- **動作**：
  - 快速重傳遺失封包
  - 調整門檻值
  - 進入擁塞避免階段

### SCTP 協定

**串流控制傳輸協定 (Stream Control Transmission Protocol)**
- **特性**：結合 TCP 可靠性和 UDP 彈性
- **優點**：
  - 多重串流傳輸
  - 多重路徑支援
  - 部分可靠傳輸
  - 訊息導向

**多重串流 (Multi-streaming)**
- **概念**：一個連線支援多個獨立資料流
- **優點**：避免隊頭阻塞問題
- **應用**：網頁瀏覽、多媒體傳輸

---

## 應用層協定與服務
[⬆️ 回到目錄](#目錄)

### 網域名稱系統 (DNS)

**基本概念**
- **功能**：將網域名稱轉換為 IP 位址
- **協定**：UDP (主要) / TCP (大型回應)
- **埠號**：53

**網域名稱結構**
```
主機名稱.機構名稱.機構類別.地區名稱
www     .google  .com     .tw
```

**DNS 運作流程**
1. **本地快取查詢**：檢查本機 DNS 快取
2. **本地 DNS 伺服器**：查詢 ISP 的 DNS
3. **遞迴查詢**：如果本地 DNS 沒有記錄
   - 查詢根 DNS 伺服器
   - 查詢頂級域 DNS (.com)
   - 查詢權威 DNS (google.com)
   - 取得最終 IP 位址
4. **快取更新**：儲存查詢結果
5. **回應用戶**：回傳 IP 位址

**DNS 記錄類型**
- **A 記錄**：主機名稱對應 IPv4 位址
- **AAAA 記錄**：主機名稱對應 IPv6 位址
- **CNAME 記錄**：別名記錄
- **MX 記錄**：郵件伺服器記錄
- **NS 記錄**：名稱伺服器記錄
- **PTR 記錄**：反向查詢記錄

### 動態主機設定協定 (DHCP)

**基本功能**
- **目的**：自動分配 IP 位址和網路設定
- **協定**：UDP
- **埠號**：67 (伺服器) / 68 (客戶端)

**DHCP 運作流程**
1. **DHCP Discover**：客戶端廣播尋找 DHCP 伺服器
2. **DHCP Offer**：伺服器提供可用的 IP 位址
3. **DHCP Request**：客戶端請求特定 IP 位址
4. **DHCP ACK**：伺服器確認分配並提供完整設定

**分配資訊**
- IP 位址
- 子網路遮罩
- 預設閘道
- DNS 伺服器
- 租約時間

**優點**
- **自動化管理**：無需手動設定
- **避免衝突**：防止 IP 位址重複
- **彈性配置**：動態調整網路設定
- **集中管理**：統一管理 IP 位址池

### 網路地址解析

**ARP (Address Resolution Protocol)**
- **功能**：IP 位址轉換為 MAC 位址
- **工作流程**：
  1. 檢查 ARP 快取表
  2. 如果沒有記錄，發送 ARP Request (廣播)
  3. 目標主機回應 ARP Reply (單播)
  4. 更新 ARP 快取表
  5. 開始資料傳輸

**RARP (Reverse ARP)**
- **功能**：MAC 位址查詢對應的 IP 位址
- **應用**：無磁碟工作站開機
- **工作流程**：
  1. 廣播 RARP Request
  2. RARP 伺服器回應對應 IP
  3. 取得 IP 位址後開始通訊

### 網際網路控制訊息協定 (ICMP)

**基本功能**
- **位置**：網路層協定
- **用途**：錯誤回報和控制訊息
- **封裝**：封裝在 IP 封包內

**主要訊息類型**
- **Destination Unreachable**：目的地無法到達
- **Time Exceeded**：存活時間超過
- **Source Quench**：要求降低傳送速率
- **Echo Request/Reply**：回應請求/回覆 (ping)
- **Redirect**：路由重新導向

**應用工具**
- **ping**：測試連線狀態
- **traceroute**：追蹤封包路徑
- **pathping**：結合 ping 和 traceroute

### 檔案傳輸協定 (FTP)

**基本特性**
- **協定**：TCP
- **埠號**：21 (控制連線) / 20 (資料連線)
- **功能**：雙向檔案傳輸

**FTP 連線模式**
- **控制連線**：傳送命令和回應
- **資料連線**：實際檔案傳輸

**傳輸模式**
- **主動模式 (Active)**：伺服器主動連接客戶端
- **被動模式 (Passive)**：客戶端主動連接伺服器

**安全考量**
- **問題**：明文傳輸，安全性低
- **解決方案**：
  - FTPS：FTP over SSL/TLS
  - SFTP：SSH File Transfer Protocol

### 電子郵件協定

**SMTP (Simple Mail Transfer Protocol)**
- **功能**：郵件傳送協定
- **協定**：TCP
- **埠號**：25 (明文) / 587 (TLS)
- **用途**：客戶端送信、伺服器間傳送

**POP3 (Post Office Protocol 3)**
- **功能**：郵件接收協定
- **協定**：TCP
- **埠號**：110 (明文) / 995 (SSL)
- **特性**：
  - 下載後刪除伺服器郵件
  - 離線閱讀
  - 單一設備存取

**IMAP (Internet Message Access Protocol)**
- **功能**：郵件存取協定
- **協定**：TCP
- **埠號**：143 (明文) / 993 (SSL)
- **特性**：
  - 郵件保留在伺服器
  - 多設備同步
  - 線上管理資料夾
  - 選擇性下載

### 網頁相關協定

**HTTP (HyperText Transfer Protocol)**
- **功能**：網頁傳輸協定
- **協定**：TCP
- **埠號**：80
- **特性**：無狀態協定

**HTTPS (HTTP Secure)**
- **功能**：安全網頁傳輸
- **協定**：HTTP over SSL/TLS
- **埠號**：443
- **優點**：加密傳輸、身份驗證

**WebSocket**
- **功能**：全雙工通訊協定
- **用途**：即時應用、線上遊戲
- **優點**：低延遲、持續連線

### 遠端存取協定

**Telnet**
- **功能**：遠端終端存取
- **協定**：TCP
- **埠號**：23
- **缺點**：明文傳輸，安全性差

**SSH (Secure Shell)**
- **功能**：安全遠端存取
- **協定**：TCP
- **埠號**：22
- **優點**：加密傳輸、身份驗證
- **應用**：遠端管理、安全檔案傳輸

### 網路管理協定

**SNMP (Simple Network Management Protocol)**
- **功能**：網路設備管理
- **協定**：UDP
- **埠號**：161 (agent) / 162 (trap)
- **組件**：
  - 管理站 (Manager)
  - 代理程式 (Agent)
  - 管理資訊庫 (MIB)

### 多媒體協定

**RTP (Real-time Transport Protocol)**
- **功能**：即時多媒體傳輸
- **協定**：UDP
- **特性**：
  - 序號標記
  - 時間戳記
  - 負載類型識別
- **應用**：視訊會議、網路電話

**RTCP (RTP Control Protocol)**
- **功能**：RTP 控制協定
- **用途**：品質監控、擁塞控制

### 代理伺服器 (Proxy Server)

**基本功能**
- **角色**：客戶端和伺服器間的中介
- **工作流程**：
  1. 客戶端請求傳送到代理伺服器
  2. 代理伺服器代替客戶端連接目標伺服器
  3. 取得回應後轉送給客戶端

**類型**
- **正向代理**：代理客戶端存取外部資源
- **反向代理**：代理伺服器回應客戶端請求
- **透明代理**：客戶端無感知的代理

**優點**
- **快取功能**：提高存取速度
- **頻寬節省**：減少重複下載
- **存取控制**：過濾不當內容
- **安全防護**：隱藏內部網路結構
- **負載平衡**：分散伺服器負載

---

## 雲端運算
[⬆️ 回到目錄](#目錄)

### 雲端服務模式

**SaaS (Software as a Service)**
- **定義**：透過網路提供應用程式服務
- **特性**：
  - 無需安裝軟體
  - 隨時隨地存取
  - 自動更新
  - 多租戶架構
- **例子**：Gmail、Office 365、Salesforce
- **優點**：使用簡單、成本低、免維護
- **缺點**：客製化受限、需要網路連線

**PaaS (Platform as a Service)**
- **定義**：提供應用程式開發和部署平台
- **包含**：
  - 作業系統
  - 開發工具
  - 資料庫管理系統
  - 網頁伺服器
- **例子**：Google App Engine、Microsoft Azure、Heroku
- **優點**：快速開發、專注業務邏輯
- **缺點**：平台鎖定、較少控制權

**IaaS (Infrastructure as a Service)**
- **定義**：提供虛擬化的基礎設施資源
- **包含**：
  - 虛擬伺服器
  - 儲存空間
  - 網路資源
  - 作業系統
- **例子**：AWS EC2、Azure Virtual Machines、Google Compute Engine
- **優點**：完全控制、彈性擴展
- **缺點**：需要技術知識、管理複雜

**CaaS (Container as a Service)**
- **定義**：提供容器運行環境
- **特性**：
  - 輕量級虛擬化
  - 快速部署
  - 微服務架構支援
- **例子**：Docker、Kubernetes、OpenShift
- **優點**：移植性強、資源效率高
- **應用**：DevOps、微服務、CI/CD

### 雲端部署模式

**公有雲 (Public Cloud)**
- **特性**：
  - 多個租戶共享基礎設施
  - 由第三方供應商管理
  - 透過網際網路存取
- **優點**：
  - 成本低廉
  - 高度彈性
  - 免維護
  - 快速部署
- **缺點**：
  - 安全性考量
  - 較少客製化
  - 依賴網路連線
- **適用**：新創公司、小型企業

**私有雲 (Private Cloud)**
- **特性**：
  - 單一組織專用
  - 可部署在內部或外部
  - 完全控制資源
- **優點**：
  - 高度安全
  - 完全控制
  - 符合法規要求
  - 客製化程度高
- **缺點**：
  - 成本較高
  - 需要專業 IT 團隊
  - 擴展性受限
- **適用**：大型企業、政府機關

**混合雲 (Hybrid Cloud)**
- **特性**：
  - 結合公有雲和私有雲
  - 根據需求動態分配工作負載
  - 資料和應用程式可在兩者間移動
- **優點**：
  - 彈性配置
  - 成本最佳化
  - 安全性和效能平衡
- **缺點**：
  - 管理複雜
  - 整合挑戰
  - 安全性考量
- **適用**：需要彈性和控制的企業

**社群雲 (Community Cloud)**
- **特性**：
  - 特定社群或行業共享
  - 有共同需求和標準
  - 成本和資源共攤
- **優點**：
  - 符合特定需求
  - 安全性較高
  - 成本分攤
- **例子**：政府雲、醫療雲、教育雲
- **適用**：同業組織、政府機構

### 雲端運算特徵

**自助隨選服務 (On-demand Self-service)**
- **定義**：用戶可自行配置運算資源
- **特性**：無需人工介入、即時提供
- **例子**：自動化資源配置、彈性擴展

**廣泛的網路存取 (Broad Network Access)**
- **定義**：透過各種設備和網路存取服務
- **支援**：手機、平板、筆電、桌機
- **協定**：HTTP/HTTPS、API、行動應用程式

**資源池化 (Resource Pooling)**
- **定義**：供應商資源集中管理，多租戶共享
- **特性**：
  - 動態分配
  - 位置透明
  - 多租戶隔離
- **資源**：運算能力、儲存、網路、記憶體

**快速彈性 (Rapid Elasticity)**
- **定義**：資源可快速擴展或縮減
- **特性**：
  - 自動擴展
  - 即時響應需求變化
  - 看似無限的資源
- **優點**：處理流量高峰、節省成本

**計量服務 (Measured Service)**
- **定義**：資源使用可監控、控制和計費
- **計費模式**：
  - 使用量計費
  - 時間計費
  - 固定費率
- **監控**：效能監控、使用統計、成本分析

### 虛擬化技術

**Hypervisor (虛擬機器監控程式)**
- **Type 1 (Bare Metal)**：
  - 直接運行在硬體上
  - 效能較好
  - 例子：VMware vSphere、Hyper-V
- **Type 2 (Hosted)**：
  - 運行在宿主作業系統上
  - 安裝簡單
  - 例子：VMware Workstation、VirtualBox

**特性與優點**
- **硬體虛擬化**：模擬完整的硬體環境
- **作業系統隔離**：每個 VM 獨立運行
- **資源分配**：CPU、記憶體、儲存的動態分配
- **快照功能**：備份和還原 VM 狀態
- **遷移能力**：VM 可在不同主機間移動

**Container (容器技術)**
- **概念**：作業系統層級的虛擬化
- **特性**：
  - 共享宿主 OS 核心
  - 輕量級、啟動快速
  - 資源使用效率高
  - 移植性強

**容器 vs 虛擬機器**
| 特性 | 容器 | 虛擬機器 |
|------|------|----------|
| 隔離層級 | 程序級 | 硬體級 |
| 資源開銷 | 低 | 高 |
| 啟動時間 | 秒級 | 分鐘級 |
| 移植性 | 高 | 中等 |
| 安全性 | 中等 | 高 |

### 雲端安全

**安全挑戰**
- **資料外洩**：敏感資料保護
- **身份管理**：存取控制和認證
- **法規遵循**：符合各國法規要求
- **供應商鎖定**：避免過度依賴單一供應商

**安全措施**
- **加密**：資料傳輸和儲存加密
- **身份管理**：多因素認證、單一登入
- **網路安全**：防火牆、入侵偵測
- **備份恢復**：災難復原計畫
- **法規遵循**：GDPR、SOX、HIPAA

---

## 新興網路技術
[⬆️ 回到目錄](#目錄)

### 運算模式演進

**邊際運算 (Edge Computing)**
- **概念**：將運算能力推向網路邊緣
- **目的**：
  - 降低延遲
  - 減少頻寬需求
  - 提高資料隱私
  - 增強可靠性
- **架構**：
  - 邊緣設備
  - 邊緣伺服器
  - 區域資料中心
  - 雲端中心
- **應用**：
  - 自動駕駛
  - 智慧城市
  - 工業 4.0
  - AR/VR

**霧運算 (Fog Computing)**
- **定義**：雲端運算的延伸，更接近使用者
- **特性**：
  - 分散式運算
  - 低延遲
  - 位置感知
  - 異構性支援
- **與邊際運算差異**：
  - 霧運算更強調網路架構
  - 邊際運算專注於運算位置

**綠色運算 (Green Computing)**
- **目標**：減少 IT 資源的環境影響
- **策略**：
  - 虛擬化技術
  - 電源管理
  - 高效硬體設計
  - 可再生能源使用
- **效益**：
  - 降低能源消耗
  - 減少碳足跡
  - 節省營運成本

### 網路演進

**Web 發展歷程**

**Web 1.0 (1990-2004)**
- **特性**：靜態網頁時代
- **功能**：
  - 單向資訊傳遞
  - 使用者只能閱讀
  - HTML 為主
- **例子**：早期新聞網站、公司官網

**Web 2.0 (2004-2014)**
- **特性**：社群互動時代
- **功能**：
  - 雙向互動
  - 用戶生成內容
  - 社群網路
  - Ajax 技術
- **例子**：Facebook、YouTube、Wikipedia、部落格

**Web 3.0 (2014-現在)**
- **特性**：語義網與智慧網路
- **功能**：
  - 去中心化
  - 人工智慧整合
  - 物聯網連接
  - 區塊鏈技術
- **目標**：
  - 資料擁有權回歸用戶
  - 智能化服務
  - 跨平台互操作

### 區塊鏈技術

**基本概念**
- **定義**：分散式帳本技術
- **特性**：
  - 去中心化
  - 不可篡改
  - 透明公開
  - 共識機制

**區塊結構**
```
區塊 N
├── 區塊標頭
│   ├── 前一區塊雜湊值
│   ├── 時間戳記
│   ├── Merkle 根
│   └── Nonce 值
└── 交易資料
    ├── 交易 1
    ├── 交易 2
    └── ...
```

**共識機制**
- **工作量證明 (PoW)**：比特幣使用
- **權益證明 (PoS)**：以太坊 2.0
- **委任權益證明 (DPoS)**：EOS
- **實用拜占庭容錯 (PBFT)**：企業級應用

**應用領域**
- **加密貨幣**：比特幣、以太幣
- **智能合約**：自動執行的合約
- **供應鏈管理**：商品溯源
- **數位身份**：去中心化身份認證
- **投票系統**：透明的電子投票

---